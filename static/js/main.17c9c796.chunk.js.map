{"version":3,"sources":["icons/DroplistAddButtonIcon.tsx","components/Droplist/Droplist.tsx","components/App/App.tsx","hooks/useForm.ts","index.tsx"],"names":["Icon","className","fill","viewBox","xmlns","d","Droplist","memo","withPersonal","inputClass","inputTitle","labelClass","upSelectClass","selectId","selectClass","required","values","readOnly","placeholder","defaultState","setValues","name","inputRef","array","useState","value","setValue","isSelectOpen","setIsSelectOpen","isInputFocus","setIsInputFocus","filteredArray","setFilteredArray","text","key","selectedValue","setSelectedValue","isFisrtStatePlace","setIsFisrtStatePlace","isItemsUp","setIsItemsUp","isValueInArray","setIsValueInArray","itemsRef","useRef","handleChangeMainValue","prev","doNotScrollPage","useCallback","e","indexOf","preventDefault","handleLiKeyDown","item","window","addEventListener","nextElement","target","nextSibling","nodeName","focus","firstElement","closest","firstChild","prevElement","previousSibling","lastElement","lastChild","console","log","handleTestSelect","setTimeout","removeEventListener","some","i","handleSelect","handleClose","handleOpen","document","closeDrop","useEffect","isOldValues","length","id","arrayBeforeFilter","unshift","filter","toLowerCase","current","getBoundingClientRect","bottom","innerHeight","k","onChange","ref","onClick","onFocus","onBlur","relatedTarget","onKeyDown","element","click","autoComplete","map","tabIndex","DroplistAddButtonIcon","App","handleChange","evt","input","useForm","firstDroplist","secondDroplist","thirdDroplist","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.17c9c796.chunk.js","sourcesContent":["import { IIconProps } from './interfaces';\n\nconst Icon: React.FC<IIconProps> = ({ className, fill }) => {\n  return (\n    <svg\n      viewBox=\"0 0 14 14\"\n      className={className}\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M13.4168 7.91668H7.91683V13.4167H6.0835V7.91668H0.583496V6.08334H6.0835V0.583344H7.91683V6.08334H13.4168V7.91668Z\"\n        className={fill}\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import { memo, useCallback, useEffect, useRef, useState } from 'react';\n\nimport type { IValue } from '../../interfaces';\n\nimport DroplistAddButtonIcon from '../../icons/DroplistAddButtonIcon';\nimport './Droplist.scss';\n\nexport type ArrayObject = {\n  text?: string;\n  key?: string;\n  [index: string]: string;\n};\n\ninterface DroplistProps {\n  className?: string;\n  withPersonal?: boolean;\n  inputClass?: string;\n  inputTitle?: string;\n  labelClass?: string;\n  upSelectClass?: string;\n  selectId: string;\n  selectClass?: string;\n  required?: boolean;\n  values: IValue;\n  readOnly?: boolean;\n  placeholder?: string;\n  defaultState?: string;\n  setValues: React.Dispatch<React.SetStateAction<IValue>>;\n  name: string;\n  inputRef?: React.MutableRefObject<HTMLInputElement | null>;\n  array: ArrayObject[];\n}\n\nconst Droplist: React.FC<DroplistProps> = memo(\n  ({\n    className,\n    withPersonal,\n    inputClass,\n    inputTitle,\n    labelClass,\n    upSelectClass,\n    selectId,\n    selectClass,\n    required,\n    values,\n    readOnly,\n    placeholder,\n    defaultState,\n    setValues,\n    name,\n    inputRef,\n    array,\n  }) => {\n    const [value, setValue] = useState<string>('');\n    const [isSelectOpen, setIsSelectOpen] = useState<boolean>(false);\n    const [isInputFocus, setIsInputFocus] = useState<boolean>(false);\n    const [filteredArray, setFilteredArray] = useState<ArrayObject[]>(array);\n    const [selectedValue, setSelectedValue] = useState<ArrayObject>({\n      text: '',\n      key: '',\n    });\n    const [isFisrtStatePlace, setIsFisrtStatePlace] = useState<boolean>(true);\n    const [isItemsUp, setIsItemsUp] = useState<boolean>(false);\n    const [isValueInArray, setIsValueInArray] = useState<boolean>(false);\n    const itemsRef = useRef<HTMLDivElement | null>(null);\n\n    function handleChangeMainValue(value: string): void {\n      if (!value) {\n        setValues((prev) => {\n          return { ...prev, [name]: '' };\n        });\n        setSelectedValue({ key: '', text: '' });\n      }\n    }\n\n    function handleChange(e: React.ChangeEvent<HTMLInputElement>): void {\n      handleChangeMainValue(e.target.value);\n      setValue(e.target.value);\n      if (!isSelectOpen) handleOpen();\n    }\n\n    function handleFocusInput(): void {\n      setIsInputFocus(true);\n      handleOpen();\n    }\n\n    function handleBlurInput(e: React.FocusEvent<HTMLInputElement>): void {\n      setIsInputFocus(false);\n      if (\n        !withPersonal &&\n        (!e.relatedTarget || !e.relatedTarget.closest(`#${selectId}`))\n      ) {\n        if (!values[name]) {\n          setValue('');\n          handleChangeMainValue('');\n          handleClose();\n        } else if (selectedValue.text !== value) {\n          setValue('');\n          handleChangeMainValue('');\n          handleClose();\n        } else {\n          handleClose();\n        }\n      } else if (\n        withPersonal &&\n        (!e.relatedTarget || !e.relatedTarget.closest(`#${selectId}`))\n      ) {\n        handleTestSelect(value || values[name]);\n      }\n    }\n\n    const doNotScrollPage = useCallback((e: any): void => {\n      if (['ArrowDown', 'ArrowUp'].indexOf(e.key) > -1) {\n        e.preventDefault();\n      }\n    }, []);\n\n    function handleKeyDown(e: any): void {\n      window.addEventListener('keydown', doNotScrollPage);\n      if (e.key === 'ArrowDown') {\n        const element = e.target.closest(`#${selectId}`).lastChild.firstChild;\n        if (element) element.focus();\n      } else if (e.key === 'Enter') {\n        const element = e.target.closest(`#${selectId}`).lastChild.firstChild;\n        e.preventDefault();\n        if (element) element.click();\n      }\n      setTimeout(() => {\n        window.removeEventListener('keydown', doNotScrollPage);\n      }, 1000);\n    }\n\n    function handleLiKeyDown(e: any, text: string, item?: IValue): void {\n      window.addEventListener('keydown', doNotScrollPage);\n      if (e.key === 'ArrowDown') {\n        const nextElement = e.target.nextSibling;\n        if (nextElement && nextElement.nodeName === 'DIV') {\n          nextElement.focus();\n        } else {\n          const firstElement = e.target.closest('#ul').firstChild;\n          if (firstElement && firstElement.nodeName === 'DIV')\n            firstElement.focus();\n        }\n      } else if (e.key === 'ArrowUp') {\n        const prevElement = e.target.previousSibling;\n        if (prevElement && prevElement.nodeName === 'DIV') {\n          prevElement.focus();\n        } else {\n          const lastElement = e.target.closest('#ul').lastChild;\n          console.log(lastElement);\n          if (lastElement && lastElement.nodeName === 'DIV') {\n            lastElement.focus();\n          } else if (\n            lastElement.previousSibling &&\n            lastElement.previousSibling.nodeName === 'DIV'\n          ) {\n            lastElement.previousSibling.focus();\n          }\n        }\n      } else if (e.key === 'Enter') {\n        handleTestSelect(text, item);\n      }\n      setTimeout(() => {\n        window.removeEventListener('keydown', doNotScrollPage);\n      }, 1000);\n    }\n\n    function handleTestSelect(text: string, item?: IValue): void {\n      let key;\n      array.some((i) => {\n        if (i.text === text) {\n          key = i.key;\n          return true;\n        }\n        return false;\n      });\n      if (key) {\n        handleSelect(key, text, item);\n      } else {\n        handleSelect('personal', text);\n      }\n    }\n\n    function handleSelect(key: string, text: string, item?: IValue): void {\n      if (key === 'personal') {\n        setValues((prev) => {\n          return { ...prev, [name]: text };\n        });\n      } else {\n        setValues((prev) => {\n          return { ...prev, [name]: key };\n        });\n        setValue(text);\n      }\n      setSelectedValue({ key: key, text: text });\n      handleClose();\n    }\n\n    function handleOpen() {\n      if (!isSelectOpen) {\n        document.addEventListener('click', closeDrop);\n        setIsSelectOpen(true);\n      } else if (!isInputFocus) {\n        handleClose();\n      }\n    }\n\n    function handleClose() {\n      document.removeEventListener('click', closeDrop);\n      setIsSelectOpen(false);\n    }\n\n    const closeDrop = useCallback((e: any) => {\n      if (!e.target.closest('#no-close')) handleClose();\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n      if (selectedValue.key !== 'personal') {\n        let isOldValues;\n        let text: string = '';\n        isOldValues = array.some((i) => {\n          if (i.text && i.text === selectedValue.text) {\n            text = i.text;\n          }\n          return i.text === selectedValue.text;\n        });\n\n        if (!isOldValues) {\n          setValue('');\n        } else {\n          setValue(text);\n        }\n      }\n    }, [array, selectedValue]);\n\n    useEffect(() => {\n      if (values[name] && !value && array.length > 0) {\n        let text: string = '';\n        let stateId: number | undefined = undefined;\n        array.some((i, id) => {\n          if (i.key === values[name] && i.text) {\n            stateId = id;\n            text = i.text;\n            return true;\n          }\n          return false;\n        });\n        if (text) {\n          setValue(text);\n          setSelectedValue({ key: values[name], text: text });\n        } else {\n          setValue(values[name]);\n          setSelectedValue({ key: 'personal', text: values[name] });\n        }\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [array]);\n\n    useEffect(() => {\n      if (value) {\n        let arrayBeforeFilter: ArrayObject[];\n        arrayBeforeFilter = array;\n        if (selectedValue.key) {\n          const isNewChoise = arrayBeforeFilter.some((i) => {\n            if (i) {\n              return selectedValue.key === i.key;\n            }\n            return false;\n          });\n          !isNewChoise && arrayBeforeFilter.unshift(selectedValue);\n        }\n        setFilteredArray(\n          selectedValue.key !== values[name] || selectedValue.text !== value\n            ? arrayBeforeFilter.filter((item) => {\n                if (item.text) {\n                  return (\n                    item.text.toLowerCase().indexOf(value.toLowerCase()) >= 0\n                  );\n                } else {\n                  return undefined;\n                }\n              })\n            : arrayBeforeFilter,\n        );\n      } else {\n        setFilteredArray(array);\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [array, value, selectedValue]);\n\n    useEffect(() => {\n      if (defaultState && isFisrtStatePlace && !values[name]) {\n        let key: string = '';\n        let stateId: number | undefined = undefined;\n        array.some((i, id) => {\n          if (i.text === defaultState && i.key) {\n            stateId = id;\n            key = i.key;\n            setIsFisrtStatePlace(false);\n            return true;\n          }\n          return false;\n        });\n        if (key) {\n          setValue(defaultState);\n          setValues((prev) => {\n            return { ...prev, [name]: key };\n          });\n          setSelectedValue({ key: key, text: defaultState });\n        }\n      } else {\n        setIsFisrtStatePlace(false);\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [array, defaultState, isFisrtStatePlace]);\n\n    useEffect(() => {\n      if (\n        itemsRef &&\n        itemsRef.current &&\n        itemsRef.current.previousSibling &&\n        filteredArray\n      ) {\n        // console.log(itemsRef.current.previousSibling.getBoundingClientRect().bottom, (filteredArray.length > 4 ? 260 : filteredArray.length*40), window.innerHeight)\n        if (\n          itemsRef.current.previousSibling.getBoundingClientRect().bottom +\n            (filteredArray.length > 4 ? 260 : filteredArray.length * 40) >\n          window.innerHeight\n        ) {\n          setIsItemsUp(true);\n        } else {\n          setIsItemsUp(false);\n        }\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isSelectOpen, filteredArray, itemsRef.current]);\n\n    useEffect(() => {\n      let k;\n      filteredArray.some((i) => {\n        if (i.text === value) {\n          k = i.text;\n          return true;\n        }\n        return false;\n      });\n      if (k) {\n        setIsValueInArray(true);\n      } else {\n        setIsValueInArray(false);\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [value]);\n\n    return (\n      <div\n        id=\"no-close\"\n        className={`droplist${className ? ` ${className}` : ''}`}\n      >\n        <div\n          id={selectId}\n          className={`droplist__select${\n            upSelectClass ? ` ${upSelectClass}` : ''\n          }`}\n        >\n          <label\n            className={`${\n              labelClass\n                ? labelClass\n                : `droplist__label${\n                    isInputFocus ? ' droplist__label_focused' : ''\n                  }`\n            }`}\n          >\n            {\n              <input\n                required={required}\n                className={`droplist__input${\n                  inputClass ? ` ${inputClass}` : ''\n                }${readOnly ? ' droplist__input_readonly' : ''}`}\n                placeholder={placeholder}\n                name={name}\n                readOnly={readOnly}\n                onChange={handleChange}\n                ref={inputRef}\n                value={value}\n                onClick={handleOpen}\n                onFocus={handleFocusInput}\n                onBlur={handleBlurInput}\n                onKeyDown={handleKeyDown}\n                autoComplete=\"new-password\"\n              />\n            }\n            {inputTitle && inputTitle}\n          </label>\n          {isSelectOpen && (\n            <div\n              ref={itemsRef}\n              id=\"ul\"\n              className={`droplist__items${\n                isSelectOpen ? ' droplist__items_open' : ''\n              }${selectClass ? ` ${selectClass}` : ''}${\n                value && withPersonal ? ' droplist__items_with-pesronal' : ''\n              }${\n                isItemsUp ? ' droplist__items_up' : ' droplist__items_bottom'\n              }`}\n            >\n              {filteredArray &&\n                filteredArray.map((item, id) => (\n                  <div\n                    className=\"droplist__item\"\n                    key={id}\n                    tabIndex={id + 1}\n                    onClick={() => {\n                      handleSelect(\n                        item.key ? item.key : '',\n                        item.text ? item.text : '',\n                        item,\n                      );\n                    }}\n                    onKeyDown={(e) => {\n                      handleLiKeyDown(e, item.text ? item.text : '', item);\n                    }}\n                  >\n                    <span className=\"droplist__text\">{item.text}</span>\n                  </div>\n                ))}\n              {value && !isValueInArray && withPersonal && (\n                <div\n                  className=\"droplist__item\"\n                  tabIndex={filteredArray && filteredArray.length + 1}\n                  onClick={() => {\n                    handleTestSelect(value);\n                  }}\n                  onKeyDown={(e) => {\n                    handleLiKeyDown(e, value);\n                  }}\n                >\n                  {' '}\n                  <DroplistAddButtonIcon\n                    className=\"droplist__item-plus\"\n                    fill=\"droplist__item-plus-fill\"\n                  />{' '}\n                  Добавить{' '}\n                  <span className=\"droplist__text droplist__text_blue\">\n                    {value}\n                  </span>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  },\n);\n\nexport default Droplist;\n","import useForm from '../../hooks/useForm';\nimport Droplist from '../Droplist/Droplist';\nimport './App.scss';\n\nconst App: React.FC<{}> = () => {\n  const { values, setValues } = useForm<string>();\n  const arrayForDroplist = [\n    { key: 'Вариант 1', text: 'Вариант 1' },\n    { key: 'Вариант 2', text: 'Вариант 2' },\n    { key: 'Вариант 3', text: 'Вариант 3' },\n    { key: 'Вариант 4', text: 'Вариант 4' },\n    { key: 'Вариант 5', text: 'Вариант 5' },\n  ];\n  const arrayForDroplistTwo = [\n    { key: 'Мужской', text: 'Мужской' },\n    { key: 'Женский', text: 'Женский' },\n  ];\n  const arrayForDroplistThree = [\n    { key: 'Пицца', text: 'Пицца' },\n    { key: 'Суши', text: 'Суши' },\n  ];\n\n  return (\n    <>\n      <header className=\"header\">\n        <h1 className=\"header__title\">Dropdown-select</h1>\n      </header>\n      <main className=\"main root__main\">\n        <section className=\"section main__section\">\n          <h2 className=\"section__title\">Дропдаун с поиском</h2>\n          <div className=\"section__container\">\n            <Droplist\n              className=\"section__droplist\"\n              inputClass=\"input input_with-arrow\"\n              selectId=\"firstDroplist\"\n              values={values}\n              placeholder=\"Выберите значение\"\n              setValues={setValues}\n              name=\"firstDroplist\"\n              array={arrayForDroplist}\n            />\n            <div className=\"section__subtitle-container\">\n              <h3 className=\"section__subtitle\">Выбранное значение: </h3>\n              <p className=\"section__value\">{values.firstDroplist}</p>\n            </div>\n          </div>\n        </section>\n        <section className=\"section main__section\">\n          <h2 className=\"section__title\">Дропдаун без поиска</h2>\n          <div className=\"section__container\">\n            <Droplist\n              className=\"section__droplist\"\n              inputClass=\"input input_with-arrow\"\n              selectId=\"secondDroplist\"\n              values={values}\n              readOnly={true}\n              placeholder=\"Пол\"\n              setValues={setValues}\n              name=\"secondDroplist\"\n              array={arrayForDroplistTwo}\n            />\n            <div className=\"section__subtitle-container\">\n              <h3 className=\"section__subtitle\">Выбранное значение: </h3>\n              <p className=\"section__value\">{values.secondDroplist}</p>\n            </div>\n          </div>\n        </section>\n        <section className=\"section main__section\">\n          <h2 className=\"section__title\">\n            Дропдаун с добавлением собственного варианта\n          </h2>\n          <div className=\"section__container\">\n            <Droplist\n              className=\"section__droplist\"\n              inputClass=\"input input_with-arrow\"\n              selectId=\"thirdDroplist\"\n              values={values}\n              placeholder=\"Любимая еда\"\n              withPersonal={true}\n              setValues={setValues}\n              name=\"thirdDroplist\"\n              array={arrayForDroplistThree}\n            />\n            <div className=\"section__subtitle-container\">\n              <h3 className=\"section__subtitle\">Выбранное значение: </h3>\n              <p className=\"section__value\">{values.thirdDroplist}</p>\n            </div>\n          </div>\n        </section>\n      </main>\n      <footer className=\"footer\">\n        <div className=\"footer__container\">\n          <p className=\"footer__text\">&#169; Gendrarium</p>\n        </div>\n      </footer>\n    </>\n  );\n};\n\nexport default App;\n","import { useState } from 'react';\r\n\r\ntype Value<T> = { [index: string]: T };\r\n\r\nexport type HandleChange<T = string> = (\r\n  e: React.ChangeEvent<HTMLInputElement> | { target: { [index: string]: any } },\r\n  k?: T,\r\n) => void;\r\n\r\ntype Form<T> = {\r\n  values: Value<T>;\r\n  handleChange: HandleChange<T>;\r\n  setValues: React.Dispatch<React.SetStateAction<Value<T>>>;\r\n};\r\n\r\nexport default function useForm<T = string | number>(): Form<T> {\r\n  const [values, setValues] = useState<Value<T>>({});\r\n\r\n  const handleChange = (\r\n    evt:\r\n      | React.ChangeEvent<HTMLInputElement>\r\n      | { target: { [index: string]: any } },\r\n    key?: T,\r\n  ): void => {\r\n    const input = evt.target;\r\n    const value: T = key ? key : input.value;\r\n    const name: string = input.name;\r\n    setValues((prev) => {\r\n      return { ...prev, [name]: value };\r\n    });\r\n  };\r\n\r\n  return { values, handleChange, setValues };\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport './index.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('.root'),\n);\n"],"sourceRoot":""}